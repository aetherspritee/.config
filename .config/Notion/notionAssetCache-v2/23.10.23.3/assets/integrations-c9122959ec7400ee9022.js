"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[801],{47836:(e,t,r)=>{r.r(t),r.d(t,{default:()=>U,LinkPreviewLab:()=>z});var a=r(67154),i=r.n(a),n=r(98135),o=r.n(n),s=(r(33948),r(67294)),l=r.n(s),u=r(3779),d=r(89602),c=r(97880),p=r(82990),g=r(44876),m=r(36054),v=r(5366),f=r(45016),b=r(43250),_=r(91996),y=r(65270),h=r(58879),x=r(89940),M=r(64215),F=r(80574),w=r(27832),I=r(61766),S=r(30874),k=r(3403),R=r(14947),Z=r(48762),T=r(46167),C=r(29823),B=r(97812),E=r(27748),P=r(62727),A=r(71202),q=r(25584),O=r(47966),V=r(83071),N=r(17970);function U(e){const t=(0,h.O7)(),{integrationPointer:r}=e,a=(0,x.VK)((()=>w.default.state.currentUserStore),[]),i=(0,x.VK)((()=>{if(a)return a.getRecordValue(r)}),[a,r]),n=(0,F.V)({value:i,waitTimeInMs:5e3});return"pending"===n.status?o()(k.Z,{}):"rejected"===n.status||"external"!==(null==n?void 0:n.value.type)?o()(C.Z,{}):o()(B.Z,{className:b.hE,title:o()(v.FormattedMessage,{id:"developerIntegrationLab.title.label",defaultMessage:"Link Preview Lab"}),subtitle:o()(v.FormattedMessage,{id:"developerIntegrationLab.subtitle.label",defaultMessage:"Plan out preview URL regex patterns and API responses."}),onNavigateBack:()=>(0,f.V2)(t,r),navigateBackMessage:o()(v.FormattedMessage,{id:"developerIntegrationLab.navigateBack.label",defaultMessage:"Back to integration"}),innerContainerStyles:{width:1200,margin:"auto",marginBottom:200}},void 0,o()(z,{starterIntegration:n.value}))}function z(e){let{starterIntegration:t}=e;const[r,a]=l().useState(""),[i,n]=l().useState(y.Az),[s,u]=l().useState(y.SV),[d,c]=l().useState(y.VR()),[p,m]=l().useState(y.nZ),[v,f]=l().useState(y.e_),[b,_]=l().useState(y.P4),[h,x]=l().useState(t);return l().useEffect((()=>{const{original_url_domains:e,original_url_patterns:r}=t.info;if(null!=e&&e[0]&&m(null==e?void 0:e[0]),null!=r&&r[0]){const{regex:e,attributes:t}=null==r?void 0:r[0];f(e);const a=t.map(g.Ah);_(a)}}),[t]),l().useEffect((()=>{x((e=>y.Hx({domain:p,regex:v,attributes:b,currentIntegration:e})))}),[p,v,b]),l().useEffect((()=>{S.Z.setState({loaded:!0,loading:!1,spaceId:y.C,integrations:[h],externalAuthentications:[],bots:[]})}),[h]),o()("div",{style:{display:"flex",justifyContent:"space-between"}},void 0,o()(L,{style:{flex:1,marginRight:12},setErrorMessage:a,rootUrl:i,setRootUrl:n,relatedUrisToAttributes:d,setRelatedUrisToAttributes:c,domain:p,setDomain:m,regexPattern:v,setRegexPattern:f,regexAttributes:b,setRegexAttributes:_,rootAttributes:s,setRootAttributes:u}),o()(W,{style:{flex:1},rootUrl:i,rootAttributes:s,relatedUrisToAttributes:d,integration:h,errorMessage:r}))}function L(e){const{style:t,rootUrl:r,setRootUrl:a,domain:i,setDomain:n,regexPattern:s,setRegexPattern:l,regexAttributes:u,setRegexAttributes:c,rootAttributes:g,setRootAttributes:m,relatedUrisToAttributes:f,setRelatedUrisToAttributes:b,setErrorMessage:_}=e,h=(0,x.VK)((()=>y.TG(g)),[g]);return o()("div",{style:t},void 0,o()("label",{},void 0,o()("div",{style:{fontSize:15,fontWeight:p.Z.fontWeight.medium}},void 0,o()(v.FormattedMessage,{id:"developerIntegrationLab.rootUrl.label",defaultMessage:"Pasted URL to Preview",description:"A url that the developers can test their integrations against as if a user attempted to unfurl it themselves."})),o()(P.Z,{value:r,onChange:e=>a(e.target.value)})),o()(K,{title:o()(v.FormattedMessage,{id:"developerIntegrationLab.regexConfiguration.label",defaultMessage:"Manage Regex Configuration",description:"Allows developers to test out regular expressions to match pasted unfurled urls."}),style:{marginTop:12}},void 0,o()("label",{style:{marginTop:12}},void 0,o()("div",{style:{fontSize:15,fontWeight:p.Z.fontWeight.medium}},void 0,o()(v.FormattedMessage,{id:"developerIntegrationLab.domain.label",defaultMessage:"Domain",description:"The domain of their integration (e.g. 'notion.so')."})),o()(P.Z,{value:i,onChange:e=>n(e.target.value)})),o()(j,{regexPattern:s,setRegexPattern:l,setErrorMessage:_}),o()("label",{style:{marginTop:12}},void 0,o()("div",{style:{fontSize:15,fontWeight:p.Z.fontWeight.medium}},void 0,o()(v.FormattedMessage,{id:"developerIntegrationLab.regexAttributes.label",defaultMessage:"Regex Attributes",description:"The matched attributes within their configuredregex patterns."})),o()(H,{value:u,onChange:c,validationType:d.$1,setErrorMessage:_}))),o()(K,{title:o()(v.FormattedMessage,{id:"developerIntegrationLab.rootAttributes.label",defaultMessage:"Unfurl response payload",description:"Allows developers to test their unfurl responses against our validator and visualizer."}),style:{marginTop:12}},void 0,o()(H,{value:g,onChange:m,validationType:d.$1,setErrorMessage:_})),o()(K,{title:o()(v.FormattedMessage,{id:"developerIntegrationLab.relatedAttributes.label",defaultMessage:"Related unfurl response payloads",description:"Allows developers to test additional unfurl responses against our validator and visualizer."}),style:{marginTop:12}},void 0,h.map((e=>{const t=f[e];return o()(K,{title:e,style:{marginTop:12,marginLeft:12}},void 0,t?o()(H,{value:t,onChange:t=>{b({...f,[e]:t})},validationType:d.$1,setErrorMessage:_}):o()(v.FormattedMessage,{id:"developerIntegrationLab.relatedAttributes.empty",defaultMessage:"No related attributes found."}))}))))}const D=["preview","mention"],G=["authenticate","error","update","loaded"];function W(e){const{style:t,rootUrl:r,rootAttributes:a,relatedUrisToAttributes:i,integration:n,errorMessage:s}=e,[u,d]=l().useState("preview"),[c,p]=l().useState("loaded");return o()("div",{style:t},void 0,o()("div",{style:{display:"flex",alignItems:"center"}},void 0,o()("div",{style:{marginRight:12}},void 0,"Preview type:"),o()(Y,{title:u,options:D,onSelectOption:e=>d(e)}),o()("div",{style:{marginLeft:12,marginRight:12}},void 0,"Preview state:"),o()(Y,{title:c,options:G,onSelectOption:e=>p(e)})),o()("div",{style:{marginTop:12,maxWidth:600}},void 0,o()(X,{previewType:u,previewState:c,rootUrl:r,rootAttributes:a,relatedUrisToAttributes:i,integration:n,errorMessage:s})))}function K(e){const[t,r]=l().useState(!1);return o()("div",{style:e.style},void 0,o()(R.Z,{onClick:()=>r(!t),style:{display:"flex",alignItems:"center"}},void 0,u.Z.triangle({width:"0.6875em",height:"0.6875em",transition:"transform 200ms ease-out",transform:"rotateZ(".concat(t?180:90,"deg)"),marginRight:4}),e.title),t&&e.children)}function H(e){const{value:t,onChange:r,validationType:a,setErrorMessage:i}=e,[n,s]=l().useState(JSON.stringify(t,null,2));return o()(P.Z,{format:P.B.ExtraLarge,inputStyle:{fontSize:14,lineHeight:"18px",height:500},textarea:!0,value:n,onChange:e=>{const t=e.target.value;s(t);const n=_.Jv(t);if(void 0===n)i("Could not parse JSON object input.");else{const e=(0,m.Gu)(a,n);e?i(e.message):(i(""),r(n))}}})}function j(e){const{regexPattern:t,setRegexPattern:r,setErrorMessage:a}=e,[i,n]=l().useState(t);return o()("label",{style:{marginTop:12}},void 0,o()("div",{style:{fontSize:15,fontWeight:p.Z.fontWeight.medium}},void 0,"Regex Pattern"),o()(P.Z,{value:i,onChange:e=>{const t=e.target.value;n(t);try{new RegExp(t);r(t),a("")}catch(i){a("Invalid Regex.")}}}))}function Y(e){const{title:t,options:r,onSelectOption:a}=e,[n,s,d]=(0,x.oR)(void 0,I.Z);return o()(T.Z,{popupType:T.Z.PopupType.Popup,buttonPopupStore:d,renderOrigin:()=>o()(O.Z,{onClick:()=>s({...n,open:!0})},void 0,t,u.Z.chevronDown({width:10,marginTop:4,marginLeft:4})),render:()=>o()(A.ZP,{menuType:A.ZP.MenuType.Popup},void 0,o()(q.Z,{type:q.Z.Type.Vertical,sections:[{key:t,items:r.map((e=>({key:e,action:()=>{a(e),s({...n,open:!1})},render:t=>l().createElement(Z.Z,i()({},t,{title:e}))}))),render:e=>l().createElement(V.Z,e)}],initialFocus:void 0}))})}function X(e){const{previewType:t,previewState:r,rootUrl:a,rootAttributes:i,relatedUrisToAttributes:n,integration:s,errorMessage:u}=e,[d,c]=l().useState(""),p=(0,h.O7)(),[g,m]=l().useState();l().useEffect((()=>{const e=y.rn({environment:p,rootUrl:a,rootAttributes:i,relatedUrisToAttributes:n,integration:s});"error"in e?c(e.error):(c(""),m(e))}),[p,a,i,n,s]),l().useEffect((()=>{c(u)}),[u]);const v=(0,M.y)((e=>({error:{marginTop:12,marginBottom:12,padding:"12px 24px",marginRight:"auto",backgroundColor:e.accentColors.red[100]}})),[]);return l().createElement(l().Fragment,null,d&&o()("div",{style:v.error},void 0,d," "),g&&o()(J,{previewType:t,previewState:r,previewStores:g}))}function J(e){const{previewType:t,previewState:r,previewStores:a}=e;return"preview"===t?o()(E.Z,{store:"authenticate"===r?a.emptyInstanceBlockStore:a.previewBlockStore,disabled:!1,showAction:"loaded"===r?void 0:r}):"mention"===t?o()(N.Z,{store:"authenticate"===r?a.emptyInlineBlockStore:a.inlineBlockStore,disabled:!1}):void(0,c.t1)(t)}},29823:(e,t,r)=>{r.d(t,{Z:()=>c});var a=r(98135),i=r.n(a),n=(r(67294),r(3779)),o=r(5366),s=r(45016),l=r(43250),u=r(58879),d=r(97812);function c(){const e=(0,u.O7)();return i()(d.Z,{className:l.wG,title:i()(o.FormattedMessage,{id:"developerIntegrationNotFound.title.label",defaultMessage:"Not Found"}),subtitle:i()(o.FormattedMessage,{id:"developerIntegrationNotFound.subtitle.label",defaultMessage:"This integration doesnâ€™t exist."}),onNavigateBack:()=>(0,s.A1)(e),icon:n.Z.eyes({width:98,height:98}),sideContent:null},void 0,null)}},59781:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});var a=r(98135),i=r.n(a),n=(r(33948),r(67294)),o=r(77420),s=r(49953),l=r(9844),u=r(70043),d=r(97880),c=r(5366),p=r(50906),g=r(45016),m=r(43250),v=r(58879),f=r(89940),b=r(80574),_=r(27832),y=r(85227),h=r(3403),x=r(29823),M=r(97812),F=r(91149),w=r(56200),I=r(40039);function S(e){const{botOrIntegrationPointer:t}=e,r=(0,v.O7)(),[{currentUserStore:a}]=(0,f.oR)(_.default),[,,S]=(0,f.oR)(void 0,y.Z),k=(0,f.Kw)(S),R=(0,f.VK)((()=>{if(t&&a){const e=t.table,r=a.getRecordValue(t);if(r){const i=e===l.K2&&"external"===r.type&&a.getRecordValue({table:s.r,id:t.id});return{botOrIntegrationRecord:{value:r,table:t.table},maybeExternalAuthRecord:i?{table:s.r,value:i}:void 0}}}}),[a,t]);(0,n.useEffect)((()=>{if(!R)return;const{botOrIntegrationRecord:e,maybeExternalAuthRecord:t}=R;S.initializeNewForm(e,t),p.DUp(r,{table:e.table})}),[S,r,R]);const Z=(0,b.V)({value:k.startingRecord});if("rejected"===Z.status||!t)return i()(x.Z,{});if("pending"===Z.status)return i()(h.Z,{});"resolved"!==Z.status&&(0,d.t1)(Z);const T=Z.value,C=T.value.name,B=T.table===o.c?T.value.icon:T.value.info.icon,E={id:T.value.id,table:T.table},P=B?{pointer:E,icon:B}:void 0;return i()(M.Z,{className:m.TF,title:C,subtitle:i()(c.FormattedMessage,{id:"developerIntegrationView.subtitle.label",defaultMessage:"Review and edit integration information."}),onNavigateBack:()=>(0,g.A1)(r),icon:i()(I.Z,{disabled:!0,icon:P,title:C,isEmptyPage:!1,size:98,isLarge:!0,style:{boxShadow:u.Z.frontDeepShadow},useInvertedColors:!0}),sideContent:i()(w.T,{integrationFormStore:S})},void 0,i()(F.Z,{integrationFormStore:S}))}},8871:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var a=r(98135),i=r.n(a),n=(r(33948),r(67294),r(5366)),o=r(43250),s=r(89940),l=r(85227),u=r(97812),d=r(91149),c=r(56200);function p(e){const{onClose:t,onSuccess:r}=e,[,,a]=(0,s.oR)(void 0,l.Z);return i()(u.Z,{className:o.Zp,title:i()(n.FormattedMessage,{id:"developerIntegrationsCreateInternal.title.label",defaultMessage:"Create a new integration"}),subtitle:i()(n.FormattedMessage,{id:"developerIntegrationsCreateInternal.subtitle.label",defaultMessage:"Weâ€™ll walk you through how to setup a new integration."}),onNavigateBack:t,sideContent:i()(c.T,{integrationFormStore:a})},void 0,i()(d.Z,{onCreateNew:r,integrationFormStore:a,shouldAutoFocusFirstField:!0}))}},91149:(e,t,r)=>{r.d(t,{Z:()=>ke});var a=r(67154),i=r.n(a),n=r(98135),o=r.n(n),s=(r(33948),r(73210),r(96486)),l=r(67294),u=r.n(l),d=r(8848),c=r(84619),p=r(74181),g=r(89101),m=r(77420),v=r(9844),f=r(75246),b=r(97880),_=r(82990),y=r(5366),h=r(50906),x=r(58762),M=r(66055),F=r(45016),w=r(47307),I=r(95477),S=r(43250),k=r(81710),R=r(91996),Z=r(33665),T=r(74350),C=r(38755),B=r(58879),E=r(89940),P=r(27832),A=r(90031),q=r(64442),O=r(14947),V=r(48762),N=r(82970),U=r(3779),z=r(64215),L=r(71202),D=r(25584),G=r(66722),W=r(83071);function K(e){const{value:t}=e,[r,a]=u().useState(!1),n=()=>a(!1);return o()(G.GI,{popupType:G.GI.PopupType.Popup,alignmentToOrigin:G.GI.Alignment.Start,placementToOrigin:G.GI.Placement.Bottom,originGap:2,sameWidthAsOrigin:!0,open:r,onDismiss:n,render:()=>u().createElement(j,i()({},e,{value:t,onClose:n})),origin:u().createElement(H,i()({},e,{value:t,onClick:()=>a(!0)}))})}function H(e){const{onClick:t,value:r,renderMenuItem:a}=e,i=(0,z.y)((e=>({dropdown:{background:e.whiteButtonBackground,border:"1px solid ".concat(e.outlineButtonBorder),borderRadius:3,height:32},expandIcon:{height:12,width:12,fill:e.lightIconColor}})),[]);return u().createElement(u().Fragment,null,a({item:r,focused:!1,onClick:t,style:i.dropdown,right:U.Z.expand(i.expandIcon)}))}function j(e){const{keyName:t,items:r,value:a,setValue:i,renderMenuItem:n,onClose:s}=e;let l=0;const d=r.map(((e,t)=>(e.id===(null==a?void 0:a.id)&&(l=t),{key:e.id,action:()=>{i(e),s()},render:t=>n({...t,item:e})})));return o()(L.ZP,{menuType:L.ZP.MenuType.Popup},void 0,o()(D.Z,{type:D.Z.Type.Vertical,initialFocus:l,sections:[{key:"form-input-section-".concat(t),items:d,render:e=>u().createElement(W.Z,e)}]}))}var Y=r(38381),X=r(98481),J=r(42402);function $(e){const{onSubmit:t,children:r,submitType:a,capabilitiesHaveChanged:i}=e,n="create-bot"===a||"create-guest-integration"===a||"create-external-integration"===a;return o()("form",{id:"developer-integration-form",style:{minWidth:200,maxWidth:440,marginLeft:24,display:"flex",flexDirection:"column"},onSubmit:e=>{e.preventDefault(),"create-guest-integration"===a?Y.Z.setState({open:!0,isDestructive:!1,isWarning:!1,title:o()(y.FormattedMessage,{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.title",defaultMessage:"Switch to Public integration?"}),message:o()(y.FormattedMessage,{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.message",defaultMessage:"Youâ€˜ll get an OAuth secret and will need to implement OAuth for authorization. See <oauthdocumentationlink>developer docs</oauthdocumentationlink> for more information.",values:{oauthdocumentationlink:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o()(J.Z,{href:g._j.developerOAuthDocs},void 0,t)}}}),confirmationMessage:o()(y.FormattedMessage,{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.confirm",defaultMessage:"Continue"}),onConfirm:()=>{t()}}):"update-guest-integration"===a&&i?Y.Z.setState({open:!0,isDestructive:!1,isWarning:!0,title:o()(y.FormattedMessage,{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.title",defaultMessage:"Change requested capabilities?"}),message:o()(y.FormattedMessage,{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.message",defaultMessage:"Any existing users of your integration will be required to re-authenticate."}),confirmationMessage:o()(y.FormattedMessage,{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.confirm",defaultMessage:"Change"}),onConfirm:()=>{t()}}):t()}},void 0,r,o()("div",{style:{display:"flex",marginTop:24,flexDirection:"row-reverse",alignItems:"center"}},void 0,o()(X.h,{onClick:()=>{const e=document.querySelector("form#developer-integration-form");if(e){const t=e.ownerDocument.createElement("input");t.style.display="none",t.type="submit",e.appendChild(t).click(),e.removeChild(t)}}},void 0,o()(Q,{isCreate:n})),n&&o()("span",{style:{fontSize:15,color:d.ZP.frontTextLight,marginRight:42}},void 0,o()(y.FormattedMessage,{id:"developerIntegrationFormHandler.create.developerTerms",defaultMessage:"By submitting, you agree to Notion's <developertermslink>Developer Terms</developertermslink>.",values:{developertermslink:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o()(J.Z,{href:g._j.developerTerms},void 0,t)}}}))))}function Q(e){const{isCreate:t}=e;return t?u().createElement(u().Fragment,null,o()("div",{style:{marginRight:4}},void 0,o()(y.FormattedMessage,{id:"formHandler.submitButton.create.label",defaultMessage:"Submit"})),U.Z.arrowRight({width:14,height:14})):o()(y.FormattedMessage,{id:"formHandler.submitButton.create.update",defaultMessage:"Save changes"})}var ee=r(53471),te=r(4637),re=r(68932),ae=r(47966),ie=r(48243);function ne(e){const{value:t,setValue:r,setError:a}=e,i=(0,B.O7)(),[n,s]=u().useState(!1);return u().createElement(u().Fragment,null,t&&o()(ie.Z,{url:t,isAuthenticated:!1,stripGoogleIconQuery:!0,width:90,render:(e,t)=>o()("div",{style:{width:90,height:90}},void 0,o()(te.Z,{src:t,style:{width:90,height:90,objectFit:"cover",borderRadius:3}}))}),o()(ae.Z,{isLarge:!0,style:{width:"fit-content",backgroundColor:"white"},onClick:()=>{(0,ee.cR)({environment:i,onStart:()=>s(!0),bucket:"public",onError:e=>{a(e.message),s(!1)},onComplete:e=>{r(e[0]),s(!1)},accept:"image/*"})}},void 0,o()(y.FormattedMessage,{id:"formInputIcon.uploadButton.label",defaultMessage:"Upload image"}),n&&o()(re.Z,{style:{marginLeft:4}})))}function oe(e){const{label:t,subtitle:r,caption:a,error:i,children:n}=e,s=(0,z.y)((()=>({label:{fontSize:15,fontWeight:_.Z.fontWeight.medium,color:d.ZP.frontTextMedium},subtitle:{fontSize:15,color:d.ZP.frontTextLight},caption:{fontSize:15,color:d.ZP.frontTextLight},error:{marginTop:4,fontSize:15,color:d.ZP.frontRed},field:{display:"grid",gridTemplateColumns:"1fr",gap:6,marginBottom:32}})),[]);return o()("label",{style:s.field},void 0,o()("div",{style:s.label},void 0,t),a&&o()("div",{style:s.caption},void 0,a),n,r&&o()("div",{style:s.subtitle},void 0,r),i&&o()("div",{style:s.error},void 0,i))}var se=r(14598),le=r(46951);function ue(e){const{options:t,value:r,setValue:a}=e;return o()("div",{style:{display:"flex",flexDirection:"column"}},void 0,t.map(((e,i)=>o()(de,{option:e,value:r,setValue:a,isFirst:0===i,isLast:i===t.length-1},e.key))))}function de(e){const{option:t,value:r,setValue:a,isFirst:i,isLast:n}=e,s=(0,z.y)((e=>({outliner:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"auto",padding:18,whiteSpace:"normal",fontSize:15,background:e.whiteButtonBackground,borderTopLeftRadius:i?3:0,borderTopRightRadius:i?3:0,borderBottomLeftRadius:n?3:0,borderBottomRightRadius:n?3:0,...!i&&{borderTop:void 0}}})),[i,n]);return o()(ae.Z,{onClick:()=>a(t.key),style:s.outliner},void 0,o()(se.Z,{title:t.title,isSelected:r===t.key,onClick:()=>{}},t.key),o()(le.Z,{isMultiline:!0,isSecondaryColor:!0,style:{marginLeft:24,marginTop:-4,fontSize:15}},void 0,t.caption))}var ce=r(40039),pe=r(79029);const ge=u().forwardRef(((e,t)=>{const{item:r,...a}=e,n=(0,B.O7)(),s=(0,E.VK)((()=>r&&(0,C.getSpaceIcon)(n,r)),[n,r]),l=(0,E.VK)((()=>r&&(0,C.getSpaceName)(n,r)),[n,r]);return u().createElement(V.Z,i()({},a,{ref:t,title:r&&o()(pe.Z,{store:r}),icon:r&&o()(ce.Z,{disabled:!0,icon:s,title:l,isEmptyPage:!1,size:19})}))}));var me=r(56200),ve=r(62727),fe=r(37235);function be(e){const{fetchSecret:t,secretName:r,onCopy:a,onError:i,confirmationModalProps:n,hasSecretBeenViewed:s}=e,l=(0,B.O7)(),[c,p]=u().useState();return o()(ve.Z,{type:c?"text":"password",disabled:!0,style:{fontFamily:_.Z.getCompositeFontFamily(T.SP).mono,color:d.ZP.frontTextMedium},inputStyle:c?{cursor:"text"}:void 0,value:c||" ".repeat(40),right:o()("div",{style:{display:"flex"}},void 0,o()("div",{style:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1}}),c?o()(ye,{secretName:r,onClick:()=>{a&&a(),(0,M.RD)({environment:l,stringValue:c,copiedMessage:M.tq.copiedToClipboard})}}):o()(_e,{hasSecretBeenViewed:s,onClick:async()=>{const e=async()=>{const e=await t();"secret"in e?p(e.secret):i(e.error.body.message)};n?Y.Z.setState({...n,open:!0,onConfirm:e}):await e()}}))})}function _e(e){const{onClick:t,hasSecretBeenViewed:r}=e;return o()(O.Z,{onClick:t,style:he.button},void 0,o()(y.FormattedMessage,r?{id:"formSecretShow.refreshSecret.label",defaultMessage:"Refresh"}:{id:"formSecretShow.showSecret.label",defaultMessage:"Show"}))}function ye(e){const{onClick:t,secretName:r}=e,[a,n]=u().useState(!1),s=o()(y.FormattedMessage,a?{defaultMessage:"{secretName} copied",id:"formSecretShow.secretCopied.tooltip",description:"Tooltip shown when user copied integration secret to clipboard",values:{secretName:r}}:{defaultMessage:"Copy {secretName}",id:"formSecretShow.copySecret.tooltip",description:"Shortcut for copying a token from an integration management page; 'secretName' will be either 'secret' or 'token'",values:{secretName:r}});return o()(fe.Z,{placement:fe.Z.Placement.Top,renderTooltip:()=>s,render:e=>u().createElement(O.Z,i()({onClick:e=>{e.preventDefault(),n(!0),setTimeout((()=>{n(!1)}),1500),t()}},e,{style:{...he.button,color:a?d.ZP.mediumTextColor:d.ZP.blue}}),o()(y.FormattedMessage,a?{id:"formSecretShow.copied.label",defaultMessage:"Copied"}:{id:"formSecretShow.copySecret.label",defaultMessage:"Copy"}))})}const he={button:{display:"inline-flex",alignItems:"center",fontFamily:_.Z.getCompositeFontFamily(T.SP).sans,borderRadius:3,padding:"0 6px",height:24,color:d.ZP.blue}};var xe=r(83328),Me=r(85567),Fe=r(719);const we={token:function(e){const{currentValue:t,setErrorValue:r}=e,[{currentUserStore:a}]=(0,E.oR)(P.default),i=(0,B.O7)(),n=(0,E.VK)((()=>{if(!a||!t)return;if(t.value.parent_table!==f.bx)return;const e=q.Z.createChildStore(a,{id:t.value.parent_id,table:t.value.parent_table});return(0,C.getSpaceName)(i,e)}),[a,t,i]);if(!t)return null;return u().createElement(u().Fragment,null,o()(be,{fetchSecret:async()=>{const e=await x.getBotToken(i,{botId:t.value.id});return"success"===e.type?(h.Cm3(i,{table:t.table}),{secret:e.data.token}):{error:e}},secretName:o()(y.FormattedMessage,{id:"developerIntegrationForm.botToken.secretName",defaultMessage:"token"}),onCopy:()=>{h.IVn(i,{table:t.table,from:"developer-integrations-view"})},onError:r}),n&&o()("div",{style:{fontSize:15,color:d.ZP.frontTextLight}},void 0,o()(y.FormattedMessage,{id:"developerIntegrationForm.botToken.subtitle",defaultMessage:"Only works with the <bold>{spaceName}</bold> workspace. To change workspace, <developertermslink>create another integration</developertermslink>.",values:{spaceName:n,bold:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o()("b",{},void 0,t)},developertermslink:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o()(J.Z,{href:g._j.myIntegrations},void 0,t)}}})))},client_id:function(e){const{currentValue:t}=e,r=(0,B.O7)(),[a,n]=u().useState(!1);if(!t)return null;const s=o()(y.FormattedMessage,a?{defaultMessage:"ID copied",id:"developerIntegrationsForm.clientIdCopied.tooltip"}:{defaultMessage:"Copy client ID",id:"developerIntegrationsForm.copyClientId.tooltip"});return o()(ve.Z,{type:"text",disabled:!0,style:{color:d.ZP.frontTextMedium,fontFamily:_.Z.getCompositeFontFamily(T.SP).mono},value:t.value.id,right:o()("div",{style:{display:"flex"}},void 0,o()("div",{style:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1}}),o()(fe.Z,{placement:fe.Z.Placement.Top,renderTooltip:()=>s,render:e=>u().createElement(O.Z,i()({onClick:e=>{e.preventDefault(),n(!0),setTimeout((()=>{n(!1)}),1500),(0,M.RD)({environment:r,stringValue:t.value.id,copiedMessage:M.tq.copiedLinkToClipboard})}},e,{style:{display:"inline-flex",alignItems:"center",borderRadius:3,padding:"0 6px",height:24,color:a?d.ZP.frontTextMedium:d.ZP.blue,fontFamily:_.Z.getCompositeFontFamily(T.SP).sans}}),o()(y.FormattedMessage,a?{id:"developerIntegrationsForm.copiedId.label",defaultMessage:"Copied"}:{id:"developerIntegrationsForm.copyId.label",defaultMessage:"Copy"}))}))})},client_secret:function(e){const{currentValue:t,setErrorValue:r}=e,a=(0,B.O7)(),[{currentUserStore:i}]=(0,E.oR)(P.default);if(!t||!i)return null;const n=t.value.info.has_viewed_secret,s=(0,A.Kv)(i,{id:t.value.id,table:v.K2});return o()(be,{fetchSecret:async()=>{const e=await x.getIntegrationSecret(a,{integrationId:t.value.id});return"success"===e.type?((0,F.bO)({environment:a,integrationStore:s}),h.Cm3(a,{table:t.table}),{secret:e.data.secret}):{error:e}},secretName:o()(y.FormattedMessage,{id:"developerIntegrationForm.integrationSecret.secretName",defaultMessage:"secret"}),onCopy:()=>{h.IVn(a,{table:t.table,from:"developer-integrations-view"})},onError:r,hasSecretBeenViewed:n,confirmationModalProps:{isDestructive:!1,isWarning:!1,title:o()(y.FormattedMessage,n?{id:"developerIntegrationForm.clientSecret.confirmationModal.title",defaultMessage:"Refresh OAuth client secret?"}:{id:"developerIntegrationForm.clientSecret.confirmationModal.title",defaultMessage:"Show OAuth client secret?"}),message:o()(y.FormattedMessage,n?{id:"developerIntegrationForm.clientSecret.confirmationModal.message",defaultMessage:"Youâ€™ve already viewed the client secret. Viewing again will revoke and generate a new one. Make sure youâ€™re storing the secret securely."}:{id:"developerIntegrationForm.clientSecret.confirmationModal.message",defaultMessage:"This client secret will only be displayed once and cannot be viewed again. Make sure youâ€™re storing the secret securely."}),confirmationMessage:o()(y.FormattedMessage,{id:"developerIntegrationForm.clientSecret.confirmationModal.confirm",defaultMessage:"Continue"})}})},name:Ie,icon:function(e){const{currentValue:t,setNewValue:r,setErrorValue:a}=e;return o()(ne,{value:t,setValue:r,setError:a})},space:Se,developer_space:Se,submission_type:function(e){const{currentValue:t,setNewValue:r,formStoreState:a}=e,i=(0,B.O7)(),n={internal:{title:o()(y.FormattedMessage,{id:"developerInternalIntegration.integrationType.internal.title",defaultMessage:"Internal integration"}),caption:o()(y.FormattedMessage,{id:"developerInternalIntegration.integrationType.internal.caption",defaultMessage:"Only available for workspaces youâ€™re an admin of. The integration can be installed to those workspaces automatically and does not require review."})},public:{title:o()(y.FormattedMessage,{id:"developerInternalIntegration.integrationType.public.title",defaultMessage:"Public integration"}),caption:o()(y.FormattedMessage,{id:"developerInternalIntegration.integrationType.public.caption",defaultMessage:"Available for any Notion user. May require review and verification for listing in the Integration Gallery."})},unfurling:{title:o()(y.FormattedMessage,{id:"developerInternalIntegration.integrationType.unfurling.title",defaultMessage:"Unfurling integration"}),caption:o()(y.FormattedMessage,{id:"developerInternalIntegration.integrationType.unfurling.caption",defaultMessage:"Available for any Notion user. May require review and verification for listing in the Integration Gallery."})}};if(!t)return null;let s;"update-bot"===a.type||"create-guest-integration"===a.type?s=[{...n.internal,key:"internal"},{...n.public,key:"public"}]:"create-bot"!==a.type&&"create-external-integration"!==a.type||(s=[{...n.internal,key:"internal"},{...n.unfurling,key:"unfurling"}]);if(!s)return null;return o()(ue,{options:s,value:t,setValue:e=>{r(e),h.kXt(i,{table:"internal"===e?m.c:v.K2})}})},redirect_uris:function(e){const{currentValue:t,setNewValue:r}=e,a=t||[],[n,s]=u().useState(""),l=()=>s("");return o()(G.ZP,{popupType:G.ZP.PopupType.Popup,sameWidthAsOrigin:!0,open:n.length>0,onDismiss:l,origin:o()(Fe.Z,{style:{background:d.ZP.white,minHeight:32,fontSize:15},placeholder:"",value:n,onChange:e=>s(e.target.value),tokens:a.map((e=>o()(Me.Z,{format:c.l.Medium,showRemoveButton:!0,isSingle:!1,value:e,onClickRemove:()=>{r(a.filter((t=>t!==e)))}},e))),onRemoveLastToken:()=>{a.length>0&&r(a.slice(0,a.length-1))}}),render:()=>{const e=n.trim(),t=(0,p.ue)(I.default.domainBaseUrl,e).map((e=>({key:e,render:t=>u().createElement(V.Z,i()({},t,{title:e})),action:()=>{l(),r([...a,e])}})));return o()(L.ZP,{menuType:L.ZP.MenuType.Popup},void 0,o()(D.Z,{type:D.Z.Type.Vertical,initialFocus:0,sections:[{key:"valid-redirect-uri-suggestion",items:t,render:e=>u().createElement(W.Z,i()({},e,{title:o()(y.FormattedMessage,{id:"developerIntegrationsForm.redirectUri.typePrompt",defaultMessage:"Type a redirect uriâ€¦"})}))}]}))}})},website_url:Ie,tagline:Ie,privacy_policy_url:Ie,terms_of_use_url:Ie,email:Ie,capabilities:function(e){const{currentValue:t,setNewValue:r}=e;return o()(D.Z,{type:D.Z.Type.Vertical,initialFocus:void 0,sections:[{key:"content_capabilities",items:[{key:"read_content",action:()=>null,render:e=>{const a=()=>{r(t?{...t,read_content:!t.read_content}:{read_content:!0,update_content:!1,insert_content:!1,read_user_without_email:!1,read_user_with_email:!1})};return u().createElement(V.Z,i()({},e,{title:o()(y.FormattedMessage,{id:"developerIntegrationForm.capabilities.read_content.title",defaultMessage:"Read content"}),caption:o()(y.FormattedMessage,{id:"developerIntegrationForm.capabilities.read_content.caption",defaultMessage:"Request to read content."}),icon:o()(N.Z,{checked:Boolean(null==t?void 0:t.read_content),size:16,onClick:a}),onClick:a}))}},{key:"update_content",action:()=>null,render:e=>{const a=()=>{r(t?{...t,update_content:!t.update_content}:{read_content:!1,update_content:!0,insert_content:!1,read_user_without_email:!1,read_user_with_email:!1})};return u().createElement(V.Z,i()({},e,{title:o()(y.FormattedMessage,{id:"developerIntegrationForm.capabilities.update_content.title",defaultMessage:"Update content"}),caption:o()(y.FormattedMessage,{id:"developerIntegrationForm.capabilities.update_content.caption",defaultMessage:"Request to update existing content."}),icon:o()(N.Z,{checked:Boolean(null==t?void 0:t.update_content),size:16,onClick:a}),onClick:a}))}},{key:"insert_content",action:()=>null,render:e=>{const a=()=>{r(t?{...t,insert_content:!t.insert_content}:{read_content:!1,update_content:!1,insert_content:!0,read_user_without_email:!1,read_user_with_email:!1})};return u().createElement(V.Z,i()({},e,{title:o()(y.FormattedMessage,{id:"developerIntegrationForm.capabilities.insert_content.title",defaultMessage:"Insert content"}),caption:o()(y.FormattedMessage,{id:"developerIntegrationForm.capabilities.insert_content.caption",defaultMessage:"Request to create new content."}),icon:o()(N.Z,{checked:Boolean(null==t?void 0:t.insert_content),size:16,onClick:a}),onClick:a}))}}],render:e=>u().createElement(W.Z,i()({},e,{title:o()(y.FormattedMessage,{id:"developerIntegrationForm.capabilities.content_capabilities.title",defaultMessage:"Content Capabilities"})}))},{key:"user_capabilities",items:[{key:"no_user_capabilities",action:()=>null,render:e=>u().createElement(V.Z,i()({},e,{title:o()(y.FormattedMessage,{id:"developerIntegrationForm.capabilities.no_user_capabilities.title",defaultMessage:"No user information"}),caption:o()(y.FormattedMessage,{id:"developerIntegrationForm.capabilities.no_user_capabilities.caption",defaultMessage:"Do not request any user information access."}),icon:o()(xe.Z,{isSelected:!Boolean((null==t?void 0:t.read_user_without_email)||(null==t?void 0:t.read_user_with_email))}),onClick:()=>{r(t?{...t,read_user_without_email:!1,read_user_with_email:!1}:{read_content:!1,update_content:!1,insert_content:!1,read_user_without_email:!1,read_user_with_email:!1})}}))},{key:"read_user_without_email",action:()=>null,render:e=>u().createElement(V.Z,i()({},e,{title:o()(y.FormattedMessage,{id:"developerIntegrationForm.capabilities.read_user_without_email.title",defaultMessage:"Read user information without email addresses"}),caption:o()(y.FormattedMessage,{id:"developerIntegrationForm.capabilities.read_user_without_email.caption",defaultMessage:"Request access to user information, not including email addresses."}),icon:o()(xe.Z,{isSelected:(null==t?void 0:t.read_user_without_email)&&!(null!=t&&t.read_user_with_email)||!1}),onClick:()=>{r(t?{...t,read_user_without_email:!0,read_user_with_email:!1}:{read_content:!1,update_content:!1,insert_content:!1,read_user_without_email:!0,read_user_with_email:!1})}}))},{key:"read_user_with_email",action:()=>null,render:e=>u().createElement(V.Z,i()({},e,{title:o()(y.FormattedMessage,{id:"developerIntegrationForm.capabilities.read_user_with_email.title",defaultMessage:"Read user information including email addresses"}),caption:o()(y.FormattedMessage,{id:"developerIntegrationForm.capabilities.read_user_with_email.caption",defaultMessage:"Request access to user information, including email addresses."}),icon:o()(xe.Z,{isSelected:(null==t?void 0:t.read_user_with_email)||!1}),onClick:()=>{r(t?{...t,read_user_without_email:!0,read_user_with_email:!0}:{read_content:!1,update_content:!1,insert_content:!1,read_user_without_email:!0,read_user_with_email:!0})}}))}],render:e=>u().createElement(W.Z,i()({},e,{title:o()(y.FormattedMessage,{id:"developerIntegrationForm.capabilities.user_capabilities.title",defaultMessage:"User Capabilities"})}))}]})},developer_name:Ie,unfurl_url:Ie,domain:Ie,regex_pattern:Ie,regex_attributes:function(e){const{currentValue:t,setNewValue:r,setErrorValue:a}=e,[i,n]=u().useState("");return u().useEffect((()=>{n(JSON.stringify(t,null,2))}),[t]),o()(ve.Z,{format:ve.B.ExtraLarge,inputStyle:{fontSize:14,lineHeight:"18px",height:300},textarea:!0,value:i,onChange:e=>{const t=e.target.value;n(t);const i=(0,R.Jv)(t);void 0===i?a(o()(y.FormattedMessage,{id:"developerIntegrationForm.jsonEditor.error",defaultMessage:"Invalid JSON."})):r(i)}})},external_oauth_authorize_url:Ie,external_oauth_token_url:Ie,external_client_id:Ie,external_client_secret:function(e){const{autoFocus:t,currentValue:r,setNewValue:a}=e;return o()(ve.Z,{type:"password",autoFocus:t,style:{background:d.ZP.white,height:32,fontSize:15},value:r,onChange:e=>a(e.target.value)})},external_oauth_scopes:Ie};function Ie(e){const{autoFocus:t,currentValue:r,setNewValue:a}=e;return o()(ve.Z,{autoFocus:t,style:{background:d.ZP.white,height:32,fontSize:15},value:r,onChange:e=>a(e.target.value)})}function Se(e){const{spaces:t,currentValue:r,setNewValue:a,setErrorValue:i}=e,[n,s]=u().useState(!1);return(0,l.useEffect)((()=>{n||0!==t.length||(s(!0),i(o()(y.FormattedMessage,{id:"developerIntegrationsForm.spacePicker.missingSpacesError",defaultMessage:"You are not an admin of any workspaces. Please <linktonotion>create a new one</linktonotion> or ask your workspace admin to update your access.",values:{linktonotion:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o()(J.Z,{href:(0,Z.UY)("guides.joinOrCreateWorkspace")},void 0,t)}}})))}),[t,i,n]),o()(K,{keyName:"space",items:t,value:r,setValue:a,renderMenuItem:e=>u().createElement(ge,e)})}const ke=(0,y.injectIntl)((function(e){var t;const{intl:r,integrationFormStore:a,onCreateNew:i,shouldAutoFocusFirstField:n}=e,d=(0,B.O7)(),[{currentUserRootStore:c}]=(0,E.oR)(P.default),p=(0,E.Kw)(a),{type:g}=p,m=(0,E.VK)((()=>(0,k.fY)()),[]),v=(0,E.VK)((()=>(0,k.Le)(a.getState().startingRecord)),[a]),[f,_]=u().useReducer(k.x6,k.yb);(0,l.useEffect)((()=>{if(!c)return;const e=(0,k.hl)({formStoreState:p,userRootStore:c});for(const t of(0,b.Yd)(e))_({field:t,value:e[t]})}),[p,c]);const h=(0,E.VK)((()=>c?c.getAdminSpaceStores():[]),[c]),x=s.debounce((()=>{const e=(0,k.Xk)({formData:f,formStateType:g});e.forEach((e=>{_({field:e,error:o()(y.FormattedMessage,{id:"developerIntegrationsForm.error.missingRequired",defaultMessage:"{ fieldName } is required.",values:{fieldName:m[e].label}})})}));const t=(0,k.bd)({formData:f,formStateType:g});t.forEach((e=>{_({field:e.fieldName,error:e.errorMessage?r.formatMessage(e.errorMessage):o()(y.FormattedMessage,{id:"developerIntegrationsCreateInternal.error.invalidInput",defaultMessage:"{ fieldName } is invalid.",values:{fieldName:m[e.fieldName].label}})})}));if(e.length>0||t.length>0||(0,k.tm)({formData:f,formStateType:g})||!c)return;const a=(0,F.JJ)({environment:d,formState:p,formData:(0,k.Xr)(f)});if(!a)return void w.showErrorMessage(o()(y.FormattedMessage,{id:"developerIntegrationsForm.error.submission",defaultMessage:"There was an error submitting your integration. Please try again or contact support if the issue persists."}));i&&i(a);const n=document.querySelector(".".concat(S.rI));n&&n.scrollIntoView({behavior:"smooth"})}),300),M="on"===(0,B.aq)("granular-bot-capabilities"),I=function(e,t){if(e&&t)for(const[r,a]of(0,b.qP)(t))if(Boolean(e[r])!==a)return!0;return!1}(null===(t=p.startingRecord)||void 0===t?void 0:t.value.capabilities,f.capabilities.value);return o()($,{submitType:g,onSubmit:x,capabilitiesHaveChanged:I},void 0,k.cW.map((e=>v[e].supportedBy[g]?o()("div",{style:{marginBottom:24}},e,o()(me.e,{keyName:e,integrationFormStore:a}),v[e].fields.map((e=>{const{supportedBy:t,label:r,subtitle:i,caption:s}=m[e];if(t[g]&&("capabilities"!==e||M)){const t=we[e];return o()(oe,{label:r,subtitle:i,caption:s,error:f[e].error},e,o()(t,{autoFocus:Boolean(n&&"name"===e),spaces:h,currentValue:f[e].value,setErrorValue:t=>{_({field:e,error:t})},setNewValue:t=>{"submission_type"!==e?"client_secret"!==e&&"token"!==e&&_({value:t,field:e}):a.updateRecordTypeOnSubmission(t)},formStoreState:p}))}return null}))):null)))}))},56200:(e,t,r)=>{r.d(t,{e:()=>g,T:()=>m});var a=r(98135),i=r.n(a),n=(r(33948),r(67294)),o=r.n(n),s=r(8848),l=r(82990),u=r(81710),d=r(89940),c=r(42001);function p(e){return"developer-integration-section-header-".concat(e)}function g(e){const{keyName:t,integrationFormStore:r}=e,a=(0,d.VK)((()=>(0,u.Le)(r.getState().startingRecord)),[r]),{title:n,subtitle:o}=a[t];return i()("div",{id:p(t),style:{fontSize:30,fontWeight:l.Z.fontWeight.bold,marginTop:24,marginBottom:24}},void 0,n,o&&i()("div",{style:{fontSize:15,color:s.ZP.frontTextLight}},void 0,o))}function m(e){const{integrationFormStore:t}=e,{type:r}=(0,d.Kw)(t),a=(0,d.VK)((()=>(0,u.Le)(t.getState().startingRecord)),[t]),n=u.cW.filter((e=>a[e].supportedBy[r])),[g,m]=o().useState(),v=g||n[0];return i()("div",{style:{display:"grid",gridTemplate:"none | auto | auto",marginTop:24,position:"sticky",top:16}},void 0,n.map((e=>i()("div",{},e,i()(c.Z,{style:{fontSize:15,height:28,marginTop:4,color:s.ZP.frontTextLight,width:"100%",...v===e&&{color:s.ZP.frontText,fontWeight:l.Z.fontWeight.medium}},onClick:()=>{const t=document.getElementById(p(e));t&&t.scrollIntoView(),m(e)}},void 0,a[e].title)))))}},719:(e,t,r)=>{r.d(t,{Z:()=>v});var a=r(67154),i=r.n(a),n=r(98135),o=r.n(n),s=r(59713),l=r.n(s),u=(r(33948),r(67294)),d=r.n(u),c=r(98742),p=r(66832),g=r(62727);class m extends p.Z{constructor(){super(...arguments),l()(this,"handleKeyDown",(e=>{"Backspace"===e.key&&0===this.props.value.length&&this.props.onRemoveLastToken()}))}renderComponent(){const{device:e}=this.environment;return o()("div",{onClick:this.props.onClick,style:e.isMobile?this.getMobileWrapStyle():this.getDesktopWrapStyle()},void 0,this.props.tokens,this.renderInput())}renderInput(){const{device:e}=this.environment,t=0===this.props.tokens.length;return d().createElement(g.Z,i()({format:g.Z.Format.Transparent},(0,c.Z)({onKeyDown:this.handleKeyDown},{onChange:this.props.onChange}),{value:this.props.value,onSubmit:this.props.onSubmit,onBlur:this.props.onBlur,focus:this.props.focus,style:{...m.inputStyle,margin:e.isMobile?"0 8px 8px 0":"0 6px 6px 0"},readOnly:this.props.readOnly,inputStyle:{height:18},size:1,type:this.props.type,placeholder:t?this.props.placeholder:"",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}))}getDesktopWrapStyle(){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",minHeight:32,boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,borderRadius:3,fontSize:14,cursor:"text",overflow:"hidden",padding:"7px 9px 0px",...this.props.style}}getMobileWrapStyle(){return{...this.getDesktopWrapStyle(),fontSize:14,padding:"7px 10px 0"}}}l()(m,"inputStyle",{flexGrow:1,flexShrink:1,flexBasis:60,minWidth:60,width:"auto",lineHeight:"20px"});const v=m},81710:(e,t,r)=>{r.d(t,{cW:()=>b,Le:()=>_,fY:()=>y,yb:()=>x,x6:()=>M,hl:()=>F,Xk:()=>w,bd:()=>I,tm:()=>S,Xr:()=>Z});var a=r(98135),i=r.n(a),n=(r(33948),r(67294),r(33728)),o=r(9844),s=r(75246),l=r(97880),u=r(44876),d=r(5366),c=r(45016),p=r(42402),g=r(64442),m=r(70764),v=r(91996),f=r(65270);const b=["secrets","basic","oauth","organization","external_oauth","unfurling"];function _(e){return{secrets:{title:i()(d.FormattedMessage,{id:"developerIntegrationForm.sectionHeader.secrets",defaultMessage:"Secrets"}),supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!1,"update-external-integration":!0},fields:["token","client_id","client_secret"]},basic:{title:i()(d.FormattedMessage,{id:"developerIntegrationForm.sectionHeader.basic",defaultMessage:"Basic Information"}),supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},fields:["name","icon","space","developer_space","submission_type","capabilities"]},oauth:{title:i()(d.FormattedMessage,{id:"developerIntegrationForm.sectionHeader.oauth",defaultMessage:"OAuth Domain & URIs"}),supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!1,"update-external-integration":!1},fields:["redirect_uris","developer_name","website_url","tagline","privacy_policy_url","terms_of_use_url","email"]},organization:{title:i()(d.FormattedMessage,{id:"developerIntegrationForm.sectionHeader.links",defaultMessage:"Organization Information"}),supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!0},fields:["developer_name","website_url","tagline","privacy_policy_url","terms_of_use_url","email"]},external_oauth:{title:i()(d.FormattedMessage,{id:"developerIntegrationForm.sectionHeader.external_oauth",defaultMessage:"External Authorization Setup"}),subtitle:i()(d.FormattedMessage,{id:"developerIntegrationForm.sectionSubtitle.external_oauth",defaultMessage:"See the <textlink>official IETF spec</textlink> for information on OAuth 2.0.",values:{textlink:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i()(p.Z,{href:"https://datatracker.ietf.org/doc/html/rfc6749",external:!0},void 0,t)}}}),supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!0},fields:["external_oauth_authorize_url","external_oauth_token_url","external_client_id","external_client_secret","external_oauth_scopes"]},unfurling:{title:i()(d.FormattedMessage,{id:"developerIntegrationForm.sectionHeader.unfurling",defaultMessage:"Unfurling Domain & Patterns"}),subtitle:i()(d.FormattedMessage,{id:"developerIntegrationForm.sectionCaption.unfurling",defaultMessage:"Visit the <previewlab>Link Preview Lab</previewlab> to plan out unfurling previews and responses.",values:{previewlab:function(){let t="";(null==e?void 0:e.table)===o.K2&&(t=(0,c.Pk)({table:e.table,id:e.value.id}));for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return i()(p.Z,{href:t,external:!0},void 0,a)}}}),supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!0},fields:["unfurl_url","domain","regex_pattern","regex_attributes"]}}}function y(){const e=(0,m.QS)();return{token:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.botToken.label",defaultMessage:"Internal Integration Token"})},client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-external-integration":!1,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.integrationClientId.label",defaultMessage:"OAuth client ID"})},client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-external-integration":!1,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.integrationSecret.label",defaultMessage:"OAuth client secret"})},name:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.name.label",defaultMessage:"Name"}),subtitle:i()(d.FormattedMessage,{id:"developerIntegrationForm.name.subtitle",defaultMessage:"Name to identify your integration to users."})},icon:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!0},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.icon.label",defaultMessage:"Logo"}),subtitle:i()(d.FormattedMessage,{id:"developerIntegrationForm.icon.subtitle",defaultMessage:"512px x 512px in PNG format is recommended."})},space:{supportedBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},requiredBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.space.label",defaultMessage:"Associated workspace"}),subtitle:i()(d.FormattedMessage,{id:"developerIntegrationForm.space.subtitle",defaultMessage:"Select a workspace to install the integration to. You can upgrade the integration to use OAuth later."})},developer_space:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.developerSpace.label",defaultMessage:"Associated workspace"}),subtitle:i()(d.FormattedMessage,{id:"developerIntegrationForm.developerSpace.subtitle",defaultMessage:"Select a workspace to install the integration to for development. Once approved it will become available to all users."})},submission_type:{supportedBy:{"create-bot":e,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-external-integration":e,"update-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.submissionType.label",defaultMessage:"Integration type"})},redirect_uris:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!1,"update-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!1,"update-external-integration":!1},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.redirect_uris.label",defaultMessage:"Redirect URIs"}),subtitle:i()(d.FormattedMessage,{id:"developerIntegrationForm.redirect_uri.subtitle",defaultMessage:"In the Notion OAuth flow, users will be redirected to this path after they have authenticated with Notion. The path will be appended with the authorization code for access and must have a protocol. It canâ€™t contain URL fragments, relative paths or wildcards, and canâ€™t be a public IP address. It must also be included in the token request."})},website_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.website_url.label",defaultMessage:"Website or homepage"}),subtitle:i()(d.FormattedMessage,{id:"developerIntegrationForm.website_url.subtitle",defaultMessage:"Used to link to your integrationâ€™s website or homepage in your integration page and authentication screens."})},tagline:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.tagline.label",defaultMessage:"Tagline"}),subtitle:i()(d.FormattedMessage,{id:"developerIntegrationForm.tagline.subtitle",defaultMessage:"A short description of what the integration does."})},privacy_policy_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.privacy_policy_url.label",defaultMessage:"Privacy policy"}),subtitle:i()(d.FormattedMessage,{id:"developerIntegrationForm.privacy_policy_url.subtitle",defaultMessage:"Used to link to your integrationâ€™s privacy policy in your integration page and authentication screens."})},terms_of_use_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.terms_of_use_url.label",defaultMessage:"Terms of use"}),subtitle:i()(d.FormattedMessage,{id:"developerIntegrationForm.terms_of_use_url.subtitle",defaultMessage:"Used to link to your integrationâ€™s terms of use in your integration page and authentication screens."})},email:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.email.label",defaultMessage:"Support email"}),subtitle:i()(d.FormattedMessage,{id:"developerIntegrationForm.email.subtitle",defaultMessage:"Used to link to your integrationâ€™s support email in your integration page and authentication screens."})},capabilities:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!1,"update-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.capabilities.label",defaultMessage:"Capabilities"}),caption:i()(d.FormattedMessage,{id:"developerIntegrationForm.capabilities.caption",defaultMessage:"These requested capabilities will be displayed to users when they authorize your integration. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i()(p.Z,{href:"https://developers.notion.com/docs/authorization"},void 0,t)}}})},developer_name:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-external-integration":!0,"update-external-integration":!0},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.developerName.label",defaultMessage:"Company name"}),caption:i()(d.FormattedMessage,{id:"developerIntegrationForm.developerName.caption",defaultMessage:"The name of your company or organization. You may use your own name if this does not apply."})},unfurl_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.unfurlUrl.label",defaultMessage:"Unfurl Callback URL"}),caption:i()(d.FormattedMessage,{id:"developerIntegrationForm.unfurlUrl.caption",defaultMessage:"Called with a POST request when an unfurl action occurs and with a DELETE request when unfurl uri preview(s) or mention(s) is deleted."})},domain:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!0},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.domain.label",defaultMessage:"Unfurl Url Domain"}),caption:i()(d.FormattedMessage,{id:"developerIntegrationForm.domain.caption",defaultMessage:"Domain for URLs to unfurl with this integration. Domains will be verified before publishing to users."})},regex_pattern:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!0},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.regexPattern.label",defaultMessage:"Unfurl Regex Pattern"}),caption:i()(d.FormattedMessage,{id:"developerIntegrationForm.regexPattern.caption",defaultMessage:"When user's paste a URL that matches this pattern, they'll have the option to unfurl with this integration."})},regex_attributes:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!0},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.regexAttributes.label",defaultMessage:"Unfurl Regex Attributes"}),caption:i()(d.FormattedMessage,{id:"developerIntegrationForm.regexAttributes.caption",defaultMessage:"Extract out attributes from the regex. Allows you to create placeholder content before the unfurl completes."})},external_oauth_authorize_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!1},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.external_oauth_authorize_url.label",defaultMessage:"OAuth Authorize URL"}),caption:i()(d.FormattedMessage,{id:"developerIntegrationForm.external_oauth_authorize_url.caption",defaultMessage:"Used by Notion to initiate user authorization with the integration."})},external_oauth_token_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!1},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.external_oauth_token_url.label",defaultMessage:"OAuth Token URL"}),caption:i()(d.FormattedMessage,{id:"developerIntegrationForm.external_oauth_token_url.caption",defaultMessage:"Called by Notion to retrieve an access token for the unfurl callback URL."})},external_oauth_scopes:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!1,"update-external-integration":!1},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.external_oauth_scopes.label",defaultMessage:"OAuth Scopes (Optional)"}),caption:i()(d.FormattedMessage,{id:"developerIntegrationForm.external_oauth_scopes.caption",defaultMessage:"Optional scopes string"})},external_client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!1},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.external_client_id.label",defaultMessage:"OAuth Client ID"})},external_client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-external-integration":!0,"update-external-integration":!1},label:i()(d.FormattedMessage,{id:"developerIntegrationForm.external_client_secret.label",defaultMessage:"OAuth Client Secret"})}}}const h={value:void 0,error:void 0},x={token:h,client_id:h,client_secret:h,name:h,icon:h,space:h,developer_space:h,submission_type:h,tagline:h,email:h,website_url:h,privacy_policy_url:h,terms_of_use_url:h,redirect_uris:h,capabilities:h,developer_name:h,unfurl_url:h,domain:h,regex_pattern:h,regex_attributes:h,external_oauth_authorize_url:h,external_oauth_token_url:h,external_client_id:h,external_client_secret:h,external_oauth_scopes:h};function M(e,t){return"error"in t?{...e,[t.field]:{...e[t.field],error:t.error}}:{...e,[t.field]:{...e[t.field],...t.value&&{error:void 0},value:t.value}}}function F(e){const{userRootStore:t,formStoreState:r}=e;if("create-bot"===r.type){return{token:void 0,client_id:void 0,client_secret:void 0,space:(t?t.getAdminSpaceStores():[])[0],submission_type:r.recordTypeOnSubmission,developer_name:void 0,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,redirect_uris:void 0,capabilities:{read_content:!0,insert_content:!0,update_content:!0,read_user_with_email:!0,read_user_without_email:!0},unfurl_url:void 0,domain:void 0,regex_pattern:void 0,regex_attributes:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0}}if("update-bot"===r.type||"create-guest-integration"===r.type){const e=r.startingRecord.value,a=t&&g.Z.createChildStore(t,{id:e.space_id,table:s.bx});return{token:r.startingRecord,client_id:void 0,client_secret:void 0,name:e.name,icon:e.icon,space:a,developer_space:void 0,submission_type:r.recordTypeOnSubmission,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,redirect_uris:void 0,capabilities:k(e.capabilities),developer_name:void 0,unfurl_url:void 0,domain:void 0,regex_pattern:void 0,regex_attributes:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0}}if("update-guest-integration"===r.type){const e=r.startingRecord.value;return{token:void 0,client_id:r.startingRecord,client_secret:r.startingRecord,name:e.name,icon:e.info.icon,space:void 0,developer_space:void 0,submission_type:r.recordTypeOnSubmission,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,redirect_uris:e.redirect_uris,capabilities:k(e.capabilities),developer_name:e.info.developer_name,unfurl_url:void 0,domain:void 0,regex_pattern:void 0,regex_attributes:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0}}if("create-external-integration"===r.type){return{token:void 0,client_id:void 0,client_secret:void 0,space:void 0,developer_space:(t?t.getAdminSpaceStores():[])[0],submission_type:r.recordTypeOnSubmission,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,redirect_uris:void 0,capabilities:void 0,developer_name:void 0,unfurl_url:void 0,domain:f.nZ,regex_pattern:f.e_,regex_attributes:f.P4,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0}}if("update-external-integration"===r.type){var a,i,n;const e=r.startingRecord.value,o=null===(a=r.startingAuthRecord)||void 0===a?void 0:a.value,l=e.info.developer_space_id,d=l&&t?g.Z.createChildStore(t,{id:l,table:s.bx}):void 0,c=null===(i=e.info.original_url_patterns)||void 0===i?void 0:i[0];return{token:void 0,client_id:r.startingRecord,client_secret:r.startingRecord,name:e.name,icon:e.info.icon,space:void 0,developer_space:d,submission_type:r.recordTypeOnSubmission,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,redirect_uris:e.redirect_uris,capabilities:void 0,developer_name:e.info.developer_name,domain:null===(n=e.info.original_url_domains)||void 0===n?void 0:n[0],regex_pattern:null==c?void 0:c.regex,regex_attributes:((null==c?void 0:c.attributes)||[]).map(u.Ah),unfurl_url:e.info.unfurl_url,external_oauth_authorize_url:null==o?void 0:o.oauth_authorize_url,external_oauth_token_url:null==o?void 0:o.oauth_token_url,external_client_id:null==o?void 0:o.client_id,external_client_secret:null==o?void 0:o.client_secret,external_oauth_scopes:null==o?void 0:o.scopes}}(0,l.t1)(r)}function w(e){const{formData:t,formStateType:r}=e,a=[],i=y();for(const n of(0,l.Yd)(i)){const e=t[n].value;i[n].requiredBy[r]&&!e&&a.push(n)}return a}function I(e){const{formData:t,formStateType:r}=e,a=[];for(const i of(0,l.Yd)(t)){const e=t[i].value,n=y()[i].supportedBy[r],o=v.tV[i];if(n&&e&&o){const t=o(e);t.validated||a.push({fieldName:i,errorMessage:t.errorMessageDescriptor})}}return a}function S(e){const{formData:t,formStateType:r}=e;return(0,l.Yd)(t).some((e=>y()[e].supportedBy[r]&&t[e].error))}function k(e){const t={read_content:!1,update_content:!1,insert_content:!1,read_user_without_email:!1,read_user_with_email:!1};return e&&Object.entries(e).forEach((e=>{let[r,a]=e;a&&(t[r]=!0)})),t}function R(e){if(!e)return;const t={};return Object.entries(e).forEach((e=>{let[r,a]=e;a&&(t[r]=!0)})),t}function Z(e){return{token:e.token.value,client_id:e.client_id.value,client_secret:e.client_secret.value,name:e.name.value,icon:e.icon.value,space:e.space.value,submission_type:e.submission_type.value,redirect_uris:(e.redirect_uris.value||[]).map((e=>v.FR(e))),website_url:v.FR(e.website_url.value),tagline:e.tagline.value,privacy_policy_url:v.FR(e.privacy_policy_url.value),terms_of_use_url:v.FR(e.terms_of_use_url.value),email:n.H3(e.email.value),capabilities:R(e.capabilities.value),developer_name:e.developer_name.value,developer_space:e.developer_space.value,unfurl_url:e.unfurl_url.value,domain:e.domain.value,regex_pattern:e.regex_pattern.value,regex_attributes:e.regex_attributes.value,external_oauth_authorize_url:v.FR(e.external_oauth_authorize_url.value),external_oauth_token_url:v.FR(e.external_oauth_token_url.value),external_client_id:e.external_client_id.value,external_client_secret:e.external_client_secret.value,external_oauth_scopes:e.external_oauth_scopes.value}}},91996:(e,t,r)=>{r.d(t,{Jv:()=>g,FR:()=>v,tV:()=>f});r(33948);var a=r(33728),i=r(20270),n=r(74181),o=r(89602),s=r(44876),l=r(64002),u=r(36054),d=r(5366),c=r(95477);const p=(0,d.defineMessages)({contentCapabilityErrorMessage:{id:"developerIntegrationsCreate.error.capabilities.invalidContent",defaultMessage:"At least one content capability must be requested."}});function g(e){let t;try{t=JSON.parse(e)}catch(r){t=void 0}return t}function m(e){const t=l.yn(e);if(!t)return{validated:!1};return l.Qc(t).hostname?{validated:!0}:{validated:!1}}function v(e){const t=l.yn(e);if(!t||!e)return;const r=t[t.length-1],a=e[e.length-1];return"/"===r&&"/"!==a?t.slice(0,t.length-1):t}const f={email:function(e){const t=a.H3(e);return t?{validated:a.oH(t).valueOf()}:{validated:!1}},redirect_uris:function(e){return{validated:e.every((e=>(0,n.mb)(c.default.domainBaseUrl,e)))}},website_url:m,privacy_policy_url:m,terms_of_use_url:m,capabilities:function(e){return e.read_content||e.insert_content||e.update_content?{validated:!0}:{validated:!1,errorMessageDescriptor:p.contentCapabilityErrorMessage}},unfurl_url:m,regex_pattern:function(e){try{return new RegExp(e),{validated:!0}}catch{return{validated:!1}}},regex_attributes:function(e){if((0,u.Gu)(o.$1,e))return{validated:!1};for(const t of e){const e=(0,s.GY)(t);if(!(0,i.nj)(e))return{validated:!1}}return{validated:!0}},external_oauth_authorize_url:m,external_oauth_token_url:m}},65270:(e,t,r)=>{r.d(t,{TG:()=>m,rn:()=>v,C:()=>f,Az:()=>b,nZ:()=>_,e_:()=>y,P4:()=>h,SV:()=>x,VR:()=>w,Hx:()=>I});r(99244),r(33948);var a=r(41432),i=r(20270),n=r(4615),o=r(21202),s=r(19889),l=r(70203),u=r(97880),d=r(44876),c=r(63143),p=r(9714),g=r(74597);function m(e){return(0,c.jj)(e.flatMap((e=>{if("relation"===e.type)return e.relation.uri})).filter(u.$K))}function v(e){const{environment:t,integration:r,rootUrl:u,rootAttributes:c,relatedUrisToAttributes:m}=e,v=(0,n.ZP)(),f=t.currentUser.id,b=new g.Z,_=[],y={};for(const[a,i]of Object.entries(m)){const e=(0,n.ZP)();_.push({id:e,uri:a,attributes:i}),y[a]=e}const h=[{id:"rootInstanceId",original_url:u,attributes:c,related_external_object_uris_to_instance_ids:y},..._].map((e=>{const t=[];for(const r of e.attributes){const e=(0,d.GY)(r);(0,i.nj)(e)&&t.push(e)}return{...e,attributes:t}}));if("success"!==(0,d.ny)(u,[r]).type)return{error:"Sample URL does not match provided integration regex."};const x={table:o.iU,id:(0,n.ZP)(),spaceId:v};let M;for(const i of h){const e={table:o.iU,id:i.id,spaceId:v},t={...i,domain:"test"},r={id:i.id,type:a.ZP.externalObjectInstance,version:0,created_at:0,created_by_table:s.KJ,created_by_id:(0,n.ZP)(),last_edited_time:0,last_edited_by_table:s.KJ,last_edited_by_id:(0,n.ZP)(),parent_table:o.iU,parent_id:(0,n.ZP)(),space_id:v,alive:!0,domain:"",format:t};if(b.setRecord({pointer:e,userId:f},{role:"editor",value:r}),i===h[0]){const a={...r,format:{...t,attributes:void 0}};b.setRecord({pointer:x,userId:f},{role:"editor",value:a}),M=e}}if(!M)return{error:"Root external object was not defined."};const F=new p.Z(t,x,{inMemoryRecordCache:b}),w=new p.Z(t,M,{inMemoryRecordCache:b}),I={table:o.iU,id:(0,n.ZP)(),spaceId:v},S=new p.Z(t,I,{inMemoryRecordCache:b}),k={id:I.id,type:"text",version:0,space_id:v,parent_id:(0,n.ZP)(),parent_table:o.iU,alive:!0,properties:{title:[(0,l.YC)((0,l.x3)(x.id))]}};b.setRecord({pointer:I,userId:f},{role:"editor",value:k});const R={table:o.iU,id:(0,n.ZP)(),spaceId:v},Z=new p.Z(t,R,{inMemoryRecordCache:b}),T={id:R.id,type:"text",version:0,space_id:v,parent_id:(0,n.ZP)(),parent_table:o.iU,alive:!0,properties:{title:[(0,l.YC)((0,l.x3)(h[0].id))]}};return b.setRecord({pointer:R,userId:f},{role:"editor",value:T}),{emptyInstanceBlockStore:F,previewBlockStore:w,emptyInlineBlockStore:S,inlineBlockStore:Z}}const f=(0,n.ZP)(),b="https://acme.com/items/23487",_="acme.com",y="^(?<site>https\\:\\/\\/acme\\.com)\\/items\\/(?<itemNo>\\d+)$",h=[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Acme Item #$<itemNo>",section:"title"}}},{id:"itemId",name:"Item Id",type:"inline",inline:{plain_text:{value:"#$<itemNo>",section:"identifier"}}},{id:"site",name:"Site",type:"inline",inline:{plain_text:{value:"$<site>",section:"secondary"}}}],x=[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Feature Request: Link Previews",section:"title"}}},{id:"state",name:"State",type:"relation",relation:{uri:"acme:item_state/open",mention:{section:"primary"}}},{id:"itemId",name:"Item Id",type:"inline",inline:{plain_text:{value:"#23487",section:"identifier"}}},{id:"itemIcon",name:"Item Icon",type:"inline",inline:{color:{value:{r:247,g:247,b:42},section:"entity"}}},{id:"user",name:"User",type:"relation",relation:{uri:"https://acme.com/fig-ment",extension:[{id:"title",section:"secondary"},{id:"avatar_url",section:"avatar"}]}},{id:"description",name:"Description",type:"inline",inline:{plain_text:{value:"Would love to be able to preview some Acme resources in Notion!\n Maybe an open item?",section:"body"}}},{id:"updated_at",name:"Updated At",type:"inline",inline:{datetime:{value:"2022-01-11T19:53:18.829Z",section:"secondary"}}},{id:"label",name:"Label",type:"inline",inline:{enum:{value:"ðŸ”¨ Ready to Build",color:{r:100,g:100,b:100},section:"primary"}}}],M={uri:"https://acme.com/fig-ment",attributes:[{id:"title",name:"User Name",type:"inline",inline:{title:{value:"fig"}}},{id:"avatar_url",name:"Avatar URL",type:"embed",embed:{src_url:"https://avatars.githubusercontent.com/u/93556354?s=88&u=4967f0be0900684b6963a953ca7fe0ff2268746f&v=4",image:{}}}]},F={uri:"acme:item_state/open",attributes:[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Open",section:"title"}}},{id:"icon",name:"Icon",type:"embed",embed:{src_url:"/images/external_integrations/acme-icon.png",image:{section:"avatar"}}},{id:"color",name:"Color",type:"inline",inline:{color:{value:{r:235,g:64,b:52},section:"background"}}}]};function w(){const e=[M,F],t=m(x),r={};for(const a of t){const t=e.find((e=>e.uri===a));t&&(r[a]=t.attributes)}return r}function I(e){const{domain:t,regex:r,currentIntegration:a}=e,n={...a.info,original_url_domains:[t],original_url_patterns:[{name:"acme-issue",regex:r,attributes:e.attributes.map((e=>{const t=(0,d.GY)(e);if((0,i.nj)(t))return t})).filter(u.$K)}]};return{...a,info:n}}},85227:(e,t,r)=>{r.d(t,{Z:()=>l});var a=r(77420),i=r(9844),n=r(97880),o=r(52016);class s extends o.Z{getInitialState(){return{type:"create-bot",startingRecord:void 0,recordTypeOnSubmission:"internal"}}updateRecordTypeOnSubmission(e){"create-bot"===this.state.type?"unfurling"===e&&this.setState({type:"create-external-integration",startingRecord:this.state.startingRecord,startingAuthRecord:void 0,recordTypeOnSubmission:e}):"update-bot"===this.state.type?"public"===e&&this.setState({type:"create-guest-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e}):"create-guest-integration"===this.state.type?"internal"===e&&this.setState({type:"update-bot",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e}):"update-guest-integration"===this.state.type||("create-external-integration"===this.state.type?"internal"===e&&this.setState({type:"create-bot",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e}):"update-external-integration"===this.state.type||(0,n.t1)(this.state))}initializeNewForm(e,t){e.table===a.c?this.setState({type:"update-bot",startingRecord:e,recordTypeOnSubmission:"internal"}):e.table===i.K2?"external"===e.value.type?this.setState({type:"update-external-integration",startingRecord:{table:e.table,value:e.value},startingAuthRecord:t,recordTypeOnSubmission:"unfurling"}):this.setState({type:"update-guest-integration",startingRecord:{table:e.table,value:e.value},recordTypeOnSubmission:"public"}):(0,n.t1)(e)}}const l=s},89602:(e,t,r)=>{r.d(t,{$1:()=>R});var a=r(14710),i=r(74487);const n=i.Ry({required:{r:i.G(i.eg(i._L(),0),255),g:i.G(i.eg(i._L(),0),255),b:i.G(i.eg(i._L(),0),255)},optional:{}}),o=i.Ry({required:{value:i.G0([i.Z_(),i.v2(i.IX(i.Z_()))])},optional:{section:i.eR(a.kE.avatar,a.kE.identifier,a.kE.primary,a.kE.secondary,a.kE.body)}}),s=i.Ry({required:{value:i.G0([i.O7(),i.v2(i.IX(i.O7()))])},optional:{}}),l=i.Ry({required:{value:i.G0([i.Rx(),i.v2(i.IX(i.Rx()))])},optional:{}}),u=i.Ry({required:{value:i.G0([i.Z_(),i.v2(i.IX(i.Z_()))])},optional:{color:n,section:i.eR(a.kE.primary)}}),d=i.Ry({required:{value:i.G0([i.Z_(),i.bc([i.Z_()])])},optional:{color:n,section:i.i0(a.kE.title)}}),c=i.Ry({required:{value:i.G0([n,i.v2(i.IX(n))])},optional:{section:i.eR(a.kE.entity,a.kE.background)}}),p=i.Ry({required:{value:i.G0([i.ur(),i.v2(i.IX(i.ur()))])},optional:{section:i.eR(a.kE.primary,a.kE.secondary)}}),g=i.Ry({required:{value:i.G0([i.ur(),i.v2(i.IX(i.ur()))])},optional:{section:i.eR(a.kE.primary,a.kE.secondary)}}),m=i.Ry({required:{value:i.G0([i.ur(),i.bc([i.ur()])])},optional:{section:i.eR(a.kE.primary,a.kE.secondary)}}),v=i.Ry({required:{value:i.G0([i.ur(),i.bc([i.ur()])])},optional:{section:i.eR(a.kE.primary,a.kE.secondary)}}),f=i.G0([i.Ry({required:{plain_text:o},optional:{type:i.i0("plain_text")}}),i.Ry({required:{boolean:s},optional:{type:i.i0("boolean")}}),i.Ry({required:{number:l},optional:{type:i.i0("number")}}),i.Ry({required:{enum:u},optional:{type:i.i0("enum")}}),i.Ry({required:{title:d},optional:{type:i.i0("title")}}),i.Ry({required:{color:c},optional:{type:i.i0("color")}}),i.Ry({required:{date:p},optional:{type:i.i0("date")}}),i.Ry({required:{datetime:g},optional:{type:i.i0("datetime")}}),i.Ry({required:{created_datetime:m},optional:{type:i.i0("created_datetime")}}),i.Ry({required:{last_edited_datetime:v},optional:{type:i.i0("last_edited_datetime")}}),i.Ry({required:{created_time:m},optional:{type:i.i0("created_time")}}),i.Ry({required:{last_edited_time:v},optional:{type:i.i0("last_edited_time")}})]),b=i.Ry({required:{},optional:{section:i.i0(a.kE.embed)}}),_=i.Ry({required:{},optional:{section:i.i0(a.kE.embed)}}),y=i.Ry({required:{},optional:{section:i.i0(a.kE.embed)}}),h=i.Ry({required:{},optional:{section:i.i0(a.kE.embed)}}),x=i.Ry({required:{},optional:{format:i.AG(i.eR("icon")),section:i.eR(a.kE.avatar,a.kE.entity,a.kE.embed)}}),M=i.jV([i.Ry({required:{src_url:i.G0([i.Z_(),i.v2(i.IX(i.Z_()))])},optional:{}}),i.G0([i.Ry({required:{html:b},optional:{type:i.i0("html")}}),i.Ry({required:{pdf:_},optional:{type:i.i0("pdf")}}),i.Ry({required:{audio:y},optional:{type:i.i0("audio")}}),i.Ry({required:{video:h},optional:{type:i.i0("video")}}),i.Ry({required:{image:x},optional:{type:i.i0("image")}})])]),F=i.G0([i.Z_(),i.v2(i.IX(i.Z_()))]),w=i.Ry({required:{uri:F},optional:{type:i.i0("mention"),mention:i.Ry({required:{},optional:{section:i.i0(a.kE.primary)}}),extension:i.Ft()}}),I=i.Ry({required:{uri:F},optional:{type:i.i0("extension"),extension:i.v2(i.IX(i.Ry({required:{id:i.Z_()},optional:{section:i.eR(a.kE.avatar,a.kE.embed,a.kE.primary,a.kE.secondary)}}))),mention:i.Ft()}}),S=i.G0([w,I]),k=i.jV([i.Ry({required:{id:i.Z_(),name:i.Z_()},optional:{}}),i.G0([i.Ry({required:{inline:f},optional:{type:i.i0("inline")}}),i.Ry({required:{embed:M},optional:{type:i.i0("embed")}}),i.Ry({required:{relation:S},optional:{type:i.i0("relation")}})])]),R=i.IX(k)}}]);